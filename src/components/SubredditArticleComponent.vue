<template>
  <v-list-tile :href="article.data.url" target="_blank" class="article" avatar>
    <v-list-tile-avatar>
      <img :src="imageSource" :alt="article.data.title" class="article-image">
    </v-list-tile-avatar>
    <v-list-tile-content>
      <v-list-tile-title class="article-headline">
        {{ article.data.title }}
        <span class="grey--text text--darken-1">({{ article.data.domain }})</span>
      </v-list-tile-title>

      <v-list-tile-sub-title class="mt-2">
        <v-row>
          <v-col xs4>
            <a :href="commentsLink" target="_blank" class="blue-grey--text">Comments</a>
          </v-col>
          <v-col xs4>
            <a :href="userLink" target="_blank" class="blue-grey--text">/u/{{ article.data.author }}</a>
          </v-col>
        </v-row>
      </v-list-tile-sub-title>
    </v-list-tile-content>
  </v-list-tile>
</template>

<script>
  export default {
    name: 'SubredditArticleComponent',
    props: ['article'],
    computed: {
      commentsLink() {
        return `https://reddit.com${this.article.data.permalink}`;
      },
      imageSource() {
        return (['default', 'self', ''].indexOf(this.article.data.thumbnail) === -1) && this.article.data.thumbnail !== 'spoiler' ?
            this.article.data.thumbnail :
            '/static/reddit-logo.png';
      },
      userLink() {
        return `https://reddit.com/u/${this.article.data.author}`;
      },
    },
  };
</script>
